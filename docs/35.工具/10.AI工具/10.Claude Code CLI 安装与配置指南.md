---
date: 2026-02-24 19:00:00
title: Claude Code CLI 安装与配置完全指南
article: true
sidebar: true
categories:
  - 工具
  - AI工具
tags:
  - Claude Code
  - AI编程
  - CLI工具
  - Anthropic
coverImg: https://image.itpiggy.top/Cover/9.webp
description: Claude Code 是 Anthropic 推出的终端 AI 编程助手，本文详细介绍如何在 Windows、macOS、Linux 上安装和配置 Claude Code CLI，包括认证方式、常用命令、CLAUDE.md 项目配置等实用技巧。
---

# Claude Code CLI 安装与配置完全指南

## 什么是 Claude Code

简单说，Claude Code 就是跑在终端里的 Claude。跟网页版不同，它能直接读写你的项目文件、跑命令、操作 Git，不用来回复制粘贴。

它能干的事：

- 分析整个代码库的结构和逻辑
- 根据你的描述写代码、改代码、修 Bug
- 跑测试、装依赖、管理 Git
- 快速定位函数定义、查找引用
- 帮你提交代码、创建 PR、做 Code Review

## 系统要求

先看看你的机器够不够格：

| 项目 | 要求 |
|------|------|
| **操作系统** | macOS 13.0+ / Windows 10 1809+ / Ubuntu 20.04+ / Debian 10+ |
| **内存** | 4 GB+ RAM |
| **网络** | 需要互联网连接 |
| **Shell** | Bash 或 Zsh 效果最佳 |
| **地区** | 需在 Anthropic 支持的国家/地区 |

::: tip 关于 Node.js
原生安装方式不需要 Node.js。只有使用已废弃的 npm 安装方式才需要 Node.js 18+。
:::

## 安装方法

### 方式一：原生安装（推荐）

Anthropic 官方推荐，装完自动后台更新，省心。

::: code-group

```bash [macOS / Linux / WSL]
curl -fsSL https://claude.ai/install.sh | bash
```

```powershell [Windows PowerShell]
irm https://claude.ai/install.ps1 | iex
```

```batch [Windows CMD]
curl -fsSL https://claude.ai/install.cmd -o install.cmd && install.cmd && del install.cmd
```

:::

::: tip 自动更新
原生安装会自动在后台更新到最新版本，无需手动操作。
:::

### 方式二：Homebrew（macOS / Linux）

```bash
brew install --cask claude-code
```

::: warning 注意
Homebrew 安装不会自动更新，需要定期手动执行 `brew upgrade claude-code`。
:::

### 方式三：WinGet（Windows）

```powershell
winget install Anthropic.ClaudeCode
```

### 方式四：npm（已废弃，不推荐）

```bash
npm install -g @anthropic-ai/claude-code
```

如果你之前用 npm 安装过，可以通过以下命令迁移到原生安装：

```bash
claude install
```

## 安装验证

装好了跑两个命令确认一下：

```bash
# 查看版本
claude --version

# 运行健康检查
claude doctor
```

## Windows 特别说明

Windows 用户有两种运行方式：

### 方式一：WSL 中运行（推荐）

WSL 2 支持完整的沙箱功能，安全性更好：

```bash
# 在 WSL 中安装
curl -fsSL https://claude.ai/install.sh | bash
```

### 方式二：原生 Windows + Git Bash

需要先安装 [Git for Windows](https://git-scm.com/downloads/win)，然后用 PowerShell 安装 Claude Code。

如果 Git 是便携版安装，需要指定 bash 路径：

```powershell
$env:CLAUDE_CODE_GIT_BASH_PATH="C:\Program Files\Git\bin\bash.exe"
```

## 认证与登录

装好后，进项目目录启动就行：

```bash
cd your-project
claude
```

首次启动会让你登录认证，有这几种方式：

### 个人用户

**Claude Pro / Max 订阅（推荐）**

直接用 Claude.ai 账号登录就行，Pro 或 Max 订阅自带 Claude Code 额度。一个订阅搞定网页版和 CLI，最省事。

**API Console 付费**

通过 [Anthropic Console](https://console.anthropic.com) 走 OAuth 认证，按用量计费。会自动建一个 "Claude Code" 工作区来追踪用量。

### 团队 / 企业用户

- **Claude for Teams / Enterprise** — 集中计费和团队管理
- **Console 团队账单** — 共享组织，邀请成员分配角色
- **云服务商** — 支持 Amazon Bedrock、Google Vertex AI、Microsoft Foundry

### 使用第三方公益站（免登录官方账号）

如果你有第三方 API Key 和 Base URL，可以通过设置环境变量绕过官方账号登录，直接进入交互面板。

在对应的终端中执行以下命令：

::: code-group

```batch [CMD]
set ANTHROPIC_AUTH_TOKEN="你的 API Key"
set ANTHROPIC_BASE_URL="你的 Base URL"
claude
```

```powershell [PowerShell]
$env:ANTHROPIC_AUTH_TOKEN="你的 API Key"
$env:ANTHROPIC_BASE_URL="你的 Base URL"
claude
```

```bash [Bash (macOS / Linux / WSL)]
export ANTHROPIC_AUTH_TOKEN="你的 API Key"
export ANTHROPIC_BASE_URL="你的 Base URL"
claude
```

:::

::: warning 注意
第三方公益站的稳定性和可用性取决于服务提供方，使用前请确认来源可靠。
:::

## 常用命令速查

进入 Claude Code 后，这些命令用得最多：

### 启动与退出

```bash
claude                # 启动交互模式
claude "你的问题"      # 单次提问模式
claude -p "问题"      # 纯文本输出（适合管道）
exit                  # 退出（或 Ctrl+C）
```

### 斜杠命令（在交互模式中使用）

| 命令 | 说明 |
|------|------|
| `/help` | 查看帮助信息 |
| `/doctor` | 健康检查，诊断安装问题 |
| `/config` | 打开配置菜单 |
| `/model` | 切换模型 |
| `/cost` | 查看当前会话的 Token 用量和费用 |
| `/clear` | 清除对话历史 |
| `/compact` | 压缩上下文，释放 Token 空间 |
| `/review` | 代码审查 |
| `/commit` | 智能 Git 提交 |

### 实用技巧

```bash
# 让 Claude 分析整个项目
claude "分析这个项目的架构"

# 修复 Bug
claude "修复 login 函数中的空指针异常"

# 代码审查
claude "/review"

# 智能提交
claude "/commit"

# 恢复上次会话
claude --resume
```

## 项目配置：CLAUDE.md

`CLAUDE.md` 是项目级的配置文件，放在项目根目录。相当于给 Claude 一份"项目说明书"，让它知道你的项目是怎么回事。

`CLAUDE.md` 可以放在两个位置：

- **项目根目录** — 直接创建 `CLAUDE.md`，所有协作者共享，适合提交到 Git
- **`.claude/` 目录下** — 创建 `.claude/CLAUDE.md`，属于个人配置，可以写一些你自己的偏好和约束规范，不影响其他人

::: tip 配合 /init 使用
在交互面板中执行 `/init` 命令，Claude 会自动分析你的项目结构并生成一份 `CLAUDE.md` 初始模板，省去手写的麻烦。你可以在这个基础上按需调整。
:::

### 创建 CLAUDE.md

在项目根目录创建 `CLAUDE.md` 文件：

```markdown
# CLAUDE.md

## 项目概述
这是一个基于 Vue 3 + VitePress 的技术博客项目。

## 技术栈
- VitePress 1.6.x
- Vue 3.5.x (Composition API)
- TypeScript
- pnpm 包管理器

## 常用命令
pnpm dev        # 启动开发服务器
pnpm build      # 构建生产版本
pnpm test       # 运行测试

## 项目结构
src/
├── components/  # Vue 组件
├── composables/ # 组合式函数
├── styles/      # 样式文件
└── utils/       # 工具函数

## 编码规范
- 使用 Composition API，不使用 Options API
- 组件文件使用 PascalCase 命名
- CSS 使用 SCSS，遵循 BEM 命名
```

### CLAUDE.md 写什么好

1. **技术栈和版本** — 不然 Claude 可能用错 API
2. **常用命令** — 它得知道怎么跑你的项目
3. **项目结构** — 帮它快速找到文件
4. **编码规范** — 生成的代码才能风格统一
5. **关键约束** — 比如"别动 config.ts 里的 URL 规则"

## settings.json 全局配置

Claude Code 的全局配置文件位于 `~/.claude/settings.json`（Windows 为 `%USERPROFILE%\.claude\settings.json`）。

常用配置项：

```json
{
  "autoUpdatesChannel": "stable",
  "theme": "dark",
  "permissions": {
    "allow": [
      "Bash(npm run build)",
      "Bash(npm test)"
    ],
    "deny": [
      "Bash(rm -rf /)"
    ]
  }
}
```

### 配置更新通道

- `"latest"` — 第一时间获取新功能（默认）
- `"stable"` — 使用约一周前的稳定版本，跳过有重大问题的版本

```json
{
  "autoUpdatesChannel": "stable"
}
```

### 权限控制

通过 `permissions` 配置哪些操作自动放行、哪些要手动确认：

```json
{
  "permissions": {
    "allow": [
      "Bash(git status)",
      "Bash(git diff)",
      "Bash(npm test)",
      "Read",
      "Write"
    ]
  }
}
```

## 更新与卸载

### 手动更新

```bash
claude update
```

### 禁用自动更新

```bash
export DISABLE_AUTOUPDATER=1
```

### 卸载

::: code-group

```bash [原生安装 - macOS/Linux]
rm -f ~/.local/bin/claude
rm -rf ~/.local/share/claude
```

```powershell [原生安装 - Windows]
Remove-Item -Path "$env:USERPROFILE\.local\bin\claude.exe" -Force
Remove-Item -Path "$env:USERPROFILE\.local\share\claude" -Recurse -Force
```

```bash [Homebrew]
brew uninstall --cask claude-code
```

```powershell [WinGet]
winget uninstall Anthropic.ClaudeCode
```

```bash [npm]
npm uninstall -g @anthropic-ai/claude-code
```

:::

### 清理配置文件（可选）

::: danger 警告
这会删除所有设置、MCP 服务器配置和会话历史！
:::

```bash
# macOS / Linux
rm -rf ~/.claude
rm ~/.claude.json
```

```powershell
# Windows PowerShell
Remove-Item -Path "$env:USERPROFILE\.claude" -Recurse -Force
Remove-Item -Path "$env:USERPROFILE\.claude.json" -Force
```

## 常见问题

### Q: Claude Code 和网页版 Claude 有什么区别？

网页版只能处理你粘贴过去的代码片段。Claude Code 跑在终端里，能直接读写文件、执行命令、理解整个项目，干活效率不是一个量级。

### Q: 需要翻墙吗？

得能访问 Anthropic 的服务。国内用户需要挂代理，设个环境变量就行：

```bash
export HTTPS_PROXY=http://127.0.0.1:7890
```

### Q: 费用怎么算？

- **Pro 订阅**（$20/月）：包含一定的 Claude Code 使用额度
- **Max 订阅**（$100/月或 $200/月）：更高的使用额度
- **API 计费**：按 Token 用量计费，详见 [Anthropic 定价页](https://www.anthropic.com/pricing)

### Q: 支持哪些编程语言？

主流语言都支持：Python、JavaScript/TypeScript、Java、Go、Rust、C/C++、Ruby、PHP、Swift、Kotlin 等等，基本上你能想到的都行。

### Q: 怎么让 Claude Code 更好地理解我的项目？

在项目根目录放一个 `CLAUDE.md`，把技术栈、项目结构、常用命令、编码规范写清楚。效果立竿见影。

---

::: info 参考资料
- [Claude Code 官方文档](https://code.claude.com/docs/en/setup)
- [Anthropic 官网](https://www.anthropic.com)
- [Claude Code GitHub](https://github.com/anthropics/claude-code)
:::
