---
date: 2025-09-23 01:15:00
title: 网站统计
article: false
permalink: /about/statistics
sidebar: false
categories:
  - 关于
coverImg: https://image.itpiggy.top/Cover/2.webp
---

# 📊 网站统计

## 🎯 访问统计

<div id="statistics-cards" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0;">
  <div style="padding: 30px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; text-align: center; color: white;">
    <h3 style="margin: 0 0 10px 0; color: white; font-size: 18px;">📊 页面浏览量</h3>
    <p id="pv-count" style="margin: 0; font-size: 32px; font-weight: bold;">--</p>
    <p style="margin: 5px 0 0 0; font-size: 14px; opacity: 0.8;">Page Views</p>
  </div>
  
  <div style="padding: 30px 20px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border-radius: 12px; text-align: center; color: white;">
    <h3 style="margin: 0 0 10px 0; color: white; font-size: 18px;">👥 独立访客</h3>
    <p id="uv-count" style="margin: 0; font-size: 32px; font-weight: bold;">--</p>
    <p style="margin: 5px 0 0 0; font-size: 14px; opacity: 0.8;">Unique Visitors</p>
  </div>
  
  <div style="padding: 30px 20px; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); border-radius: 12px; text-align: center; color: white;">
    <h3 style="margin: 0 0 10px 0; color: white; font-size: 18px;">⏱️ 站点运行时间</h3>
    <p id="runtime-count" style="margin: 0; font-size: 24px; font-weight: bold;">--</p>
    <p style="margin: 5px 0 0 0; font-size: 14px; opacity: 0.8;">Site Runtime</p>
  </div>
  
  <div style="padding: 30px 20px; background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); border-radius: 12px; text-align: center; color: white;">
    <h3 style="margin: 0 0 10px 0; color: white; font-size: 18px;">📝 文章总数</h3>
    <p id="posts-count" style="margin: 0; font-size: 32px; font-weight: bold;">--</p>
    <p style="margin: 5px 0 0 0; font-size: 14px; opacity: 0.8;">Total Posts</p>
  </div>
</div>

<!-- 下方 script 保持原有，但修复所有注释 -->
<script>
// 确保只在客户端执行
if (typeof window !== 'undefined') {
  // 计算站点运行时间
  function calculateRuntime() {
    const startDate = new Date('2025-09-21 00:00:00');
    const now = new Date();
    const diff = now - startDate;
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    return `${days}天${hours}小时`;
  }

  // 获取文章总数（真实数据）
  function getPostsCount() {
    const storedCount = localStorage.getItem('blog-posts-count');
    if (storedCount) {
      return parseInt(storedCount);
    }
    // 如果没有存储的数据，返回1（最少有一篇）
    return 1;
  }

  // 生成访客唯一标识
  function generateVisitorId() {
    let visitorId = localStorage.getItem('visitor-id');
    if (!visitorId) {
      visitorId = 'visitor_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
      localStorage.setItem('visitor-id', visitorId);
    }
    return visitorId;
  }
  // 获取访客信息
  function getVisitorInfo() {
    const visitorId = generateVisitorId();
    const firstVisit = localStorage.getItem('first-visit');
    const lastVisit = localStorage.getItem('last-visit');
    const visitCount = parseInt(localStorage.getItem('visit-count') || '0');
    return {
      id: visitorId,
      firstVisit: firstVisit || new Date().toISOString(),
      lastVisit: new Date().toISOString(),
      visitCount: visitCount + 1
    };
  }
  // 页面访问统计
  function trackPageVisit() {
    const visitor = getVisitorInfo();
    const today = new Date().toDateString();
    if (!localStorage.getItem('first-visit')) {
      localStorage.setItem('first-visit', visitor.firstVisit);
    }
    localStorage.setItem('last-visit', visitor.lastVisit);
    localStorage.setItem('visit-count', visitor.visitCount.toString());
    // 记录每日访问
    const dailyVisits = JSON.parse(localStorage.getItem('daily-visits') || '{}');
    if (!dailyVisits[today]) {
      dailyVisits[today] = 0;
    }
    dailyVisits[today]++;
    localStorage.setItem('daily-visits', JSON.stringify(dailyVisits));
    // 记录页面访问历史
    const pageHistory = JSON.parse(localStorage.getItem('page-history') || '[]');
    pageHistory.push({
      page: window.location.pathname,
      timestamp: new Date().toISOString(),
      visitorId: visitor.id
    });
    localStorage.setItem('page-history', JSON.stringify(pageHistory));
    return visitor;
  }
  // 获取真实统计数据
  function getRealStats() {
    const pageHistory = JSON.parse(localStorage.getItem('page-history') || '[]');
    const uniqueVisitors = new Set();
    let totalPageViews = 0;
    pageHistory.forEach(visit => {
      uniqueVisitors.add(visit.visitorId);
      totalPageViews++;
    });
    return {
      pv: Math.max(totalPageViews, 1),
      uv: Math.max(uniqueVisitors.size, 1)
    };
  }
  // 立即执行函数，确保数据立即显示
  function updateStats() {
    trackPageVisit();
    const runtimeElement = document.getElementById('runtime-count');
    if (runtimeElement) {
      runtimeElement.textContent = calculateRuntime();
      // 每分钟更新一次运行时长
      setInterval(() => {
        runtimeElement.textContent = calculateRuntime();
      }, 60000);
    }
    const postsElement = document.getElementById('posts-count');
    if (postsElement) {
      postsElement.textContent = getPostsCount();
    }
    const pvElement = document.getElementById('pv-count');
    const uvElement = document.getElementById('uv-count');
    try {
      const realStats = getRealStats();
      if (pvElement) pvElement.textContent = realStats.pv.toString();
      if (uvElement) uvElement.textContent = realStats.uv.toString();
      console.log('真实统计数据:', realStats);
    } catch (error) {
      console.error('获取统计数据失败:', error);
      if (pvElement) pvElement.textContent = '1';
      if (uvElement) uvElement.textContent = '1';
    }
  }
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', updateStats);
  } else {
    updateStats();
  }
  setTimeout(updateStats, 100);
}
</script>

<!-- 本地统计说明 -->
<div style="display: none;">
  <!-- 统计数据存储在浏览器本地 localStorage -->
  <!-- 每次访问页面会自动更新统计数值 -->
</div>

## 📈 实时数据

### 📊 数据来源说明

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
  <div style="padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; text-align: center; color: white;">
    <div style="font-size: 24px; margin-bottom: 8px;">📊</div>
    <div style="font-weight: bold;">Cloudflare Analytics</div>
    <div style="font-size: 12px; opacity: 0.8; margin-top: 4px;">官方统计数据</div>
  </div>
  
  <div style="padding: 20px; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); border-radius: 8px; text-align: center; color: white;">
    <div style="font-size: 24px; margin-bottom: 8px;">🌐</div>
    <div style="font-weight: bold;">Cloudflare Analytics</div>
    <div style="font-size: 12px; opacity: 0.8; margin-top: 4px;">性能监控数据</div>
  </div>
  
  <div style="padding: 20px; background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); border-radius: 8px; text-align: center; color: white;">
    <div style="font-size: 24px; margin-bottom: 8px;">🕒</div>
    <div style="font-weight: bold;">实时计算</div>
    <div style="font-size: 12px; opacity: 0.8; margin-top: 4px;">运行时间统计</div>
  </div>
</div>

<div style="text-align: center; margin: 40px 0; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px; color: white;">
  <h3 style="margin: 0; color: white;">📊 网站数据概览</h3>
  <p style="margin: 10px 0 0 0; opacity: 0.9;">详细的访问统计和用户行为分析</p>
</div>

## 🔍 统计说明

- **页面浏览量（PV）**: 基于真实的页面访问历史记录
- **独立访客数（UV）**: 基于唯一的访客ID，每个浏览器一个ID
- **站点运行时间**: 从建站日期开始计算
- **文章总数**: 需要手动设置，默认为1

## 📋 如何启用 Cloudflare Analytics

### 1️⃣ **在Cloudflare 仪表盘中启用**
1. 登录您的 [Cloudflare 仪表盘](https://dash.cloudflare.com/)
2. 选择您的域名
3. 点击 **"Analytics & Logs"** 选项卡
4. 点击 **"Web Analytics"** 按钮
5. 点击 **"Enable Web Analytics"** 按钮

### 2️⃣ **查看统计数据**
启用后，您可以在以下位置查看数据：
- **Cloudflare 仪表盘**: `https://dash.cloudflare.com/analytics`
- **本页面**: 数据会自动同步显示在上方的卡片中

### 3️⃣ **数据说明**
- **免费计划**: 每月 10,000 条记录，30天数据保留
- **实时更新**: 数据每小时更新一次
- **隐私友好**: 符合 GDPR 和 CCPA 规范
- **全球CDN**: 基于 Cloudflare 全球网络的数据收集

---

<div style="text-align: center; margin-top: 2rem; font-size: 14px; color: #666;">
  数据更新时间：每小时更新 | 统计工具：Cloudflare Analytics
</div>
