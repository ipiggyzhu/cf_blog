---
date: 2025-09-28 02:10:47
title: Shellè„šæœ¬é›†åˆ
article: false
top: false
categories:
  - ä¸“é¢˜
tags:
  - Shell
  - Linux
  - è‡ªåŠ¨åŒ–
coverImg: /img/nav/è„šæœ¬.svg
permalink: /zhuanti/shell-scripts
homeCardSort:
description: Shellè„šæœ¬æ˜¯Linux/Unixç³»ç»Ÿç®¡ç†å‘˜çš„åˆ©å™¨ï¼Œè®©ç¹ççš„è¿ç»´å·¥ä½œè‡ªåŠ¨åŒ–
---

<div class="shell-scripts-page">

# ğŸš Shellè„šæœ¬é›†åˆ

> ğŸ’¡ Shellè„šæœ¬æ˜¯Linux/Unixç³»ç»Ÿç®¡ç†å‘˜çš„åˆ©å™¨ï¼Œè®©ç¹ççš„è¿ç»´å·¥ä½œè‡ªåŠ¨åŒ–

---

## ğŸ”§ ç³»ç»Ÿç›‘æ§è„šæœ¬

<div class="script-category">
  <div class="script-item">
    <div class="script-header">
      <h3>ğŸ–¥ï¸ æœåŠ¡å™¨æ€§èƒ½ç›‘æ§</h3>
      <span class="script-tag">ç›‘æ§</span>
    </div>
    <div class="script-content">
      <p>å®æ—¶ç›‘æ§CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨ç‡ï¼Œè¶…å‡ºé˜ˆå€¼è‡ªåŠ¨å‘Šè­¦</p>
      <div class="script-code">
        <pre><code>#!/bin/bash
# æ€§èƒ½ç›‘æ§è„šæœ¬
CPU_THRESHOLD=80
MEM_THRESHOLD=85

cpu_usage=$(top -bn1 | grep "Cpu(s)" | awk '{print $2}' | cut -d'%' -f1)
mem_usage=$(free | grep Mem | awk '{printf("%.2f", $3/$2 * 100.0)}')

if (( $(echo "$cpu_usage > $CPU_THRESHOLD" | bc -l) )); then
    echo "è­¦å‘Š: CPUä½¿ç”¨ç‡è¿‡é«˜ ($cpu_usage%)"
fi</code></pre>
      </div>
      <div class="script-meta">
        <span>ğŸ“… 2024-03-20</span>
        <span>â­ é«˜é¢‘ä½¿ç”¨</span>
        <span>ğŸ”„ è‡ªåŠ¨å‘Šè­¦</span>
      </div>
    </div>
  </div>

  <div class="script-item">
    <div class="script-header">
      <h3>ğŸ“Š ç³»ç»ŸçŠ¶æ€æ£€æŸ¥</h3>
      <span class="script-tag">æ£€æŸ¥</span>
    </div>
    <div class="script-content">
      <p>å…¨é¢æ£€æŸ¥ç³»ç»ŸçŠ¶æ€ï¼ŒåŒ…æ‹¬æœåŠ¡ã€ç«¯å£ã€ç£ç›˜ç©ºé—´ç­‰</p>
      <div class="script-code">
        <pre><code>#!/bin/bash
# ç³»ç»ŸçŠ¶æ€æ£€æŸ¥è„šæœ¬
echo "=== ç³»ç»ŸçŠ¶æ€æ£€æŸ¥æŠ¥å‘Š ==="
echo "æ—¶é—´: $(date)"
echo "ä¸»æœºå: $(hostname)"
echo "è¿è¡Œæ—¶é—´: $(uptime)"
echo "ç£ç›˜ä½¿ç”¨æƒ…å†µ:"
df -h | grep -E '^/dev/'
echo "å†…å­˜ä½¿ç”¨æƒ…å†µ:"
free -h</code></pre>
      </div>
      <div class="script-meta">
        <span>ğŸ“… 2024-03-15</span>
        <span>â­ å¸¸ç”¨å·¥å…·</span>
        <span>ğŸ“‹ çŠ¶æ€æŠ¥å‘Š</span>
      </div>
    </div>
  </div>
</div>

---

## ğŸ—‚ï¸ æ–‡ä»¶ç®¡ç†è„šæœ¬

<div class="script-category">
  <div class="script-item">
    <div class="script-header">
      <h3>ğŸ—„ï¸ æ—¥å¿—æ¸…ç†</h3>
      <span class="script-tag">æ¸…ç†</span>
    </div>
    <div class="script-content">
      <p>è‡ªåŠ¨æ¸…ç†æŒ‡å®šå¤©æ•°å‰çš„æ—¥å¿—æ–‡ä»¶ï¼Œé‡Šæ”¾ç£ç›˜ç©ºé—´</p>
      <div class="script-code">
        <pre><code>#!/bin/bash
# æ—¥å¿—æ¸…ç†è„šæœ¬
LOG_DIR="/var/log"
DAYS=30

echo "æ¸…ç† $DAYS å¤©å‰çš„æ—¥å¿—æ–‡ä»¶..."
find $LOG_DIR -name "*.log" -type f -mtime +$DAYS -exec rm -f {} \;
find $LOG_DIR -name "*.log.*" -type f -mtime +$DAYS -exec rm -f {} \;
echo "æ—¥å¿—æ¸…ç†å®Œæˆ"</code></pre>
      </div>
      <div class="script-meta">
        <span>ğŸ“… 2024-03-10</span>
        <span>â­ å®šæ—¶ä»»åŠ¡</span>
        <span>ğŸ§¹ ç©ºé—´æ¸…ç†</span>
      </div>
    </div>
  </div>

  <div class="script-item">
    <div class="script-header">
      <h3>ğŸ’¾ æ–‡ä»¶å¤‡ä»½</h3>
      <span class="script-tag">å¤‡ä»½</span>
    </div>
    <div class="script-content">
      <p>å¢é‡å¤‡ä»½é‡è¦æ–‡ä»¶åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼Œæ”¯æŒå‹ç¼©å’ŒåŠ å¯†</p>
      <div class="script-code">
        <pre><code>#!/bin/bash
# æ–‡ä»¶å¤‡ä»½è„šæœ¬
SOURCE_DIR="/home/data"
BACKUP_DIR="/backup"
DATE=$(date +%Y%m%d_%H%M%S)

tar -czf "$BACKUP_DIR/backup_$DATE.tar.gz" "$SOURCE_DIR"
echo "å¤‡ä»½å®Œæˆ: backup_$DATE.tar.gz"

# åŒæ­¥åˆ°è¿œç¨‹æœåŠ¡å™¨
rsync -avz "$BACKUP_DIR/" user@remote:/backup/</code></pre>
      </div>
      <div class="script-meta">
        <span>ğŸ“… 2024-03-05</span>
        <span>â­ æ•°æ®å®‰å…¨</span>
        <span>ğŸ”„ å¢é‡å¤‡ä»½</span>
      </div>
    </div>
  </div>
</div>

---

## ğŸš€ æœåŠ¡ç®¡ç†è„šæœ¬

<div class="script-category">
  <div class="script-item">
    <div class="script-header">
      <h3>âš™ï¸ æœåŠ¡ç›‘æ§é‡å¯</h3>
      <span class="script-tag">æœåŠ¡</span>
    </div>
    <div class="script-content">
      <p>ç›‘æ§å…³é”®æœåŠ¡çŠ¶æ€ï¼Œè‡ªåŠ¨é‡å¯å¼‚å¸¸æœåŠ¡</p>
      <div class="script-code">
        <pre><code>#!/bin/bash
# æœåŠ¡ç›‘æ§è„šæœ¬
SERVICES=("nginx" "mysql" "redis")

for service in "${SERVICES[@]}"; do
    if ! systemctl is-active --quiet $service; then
        echo "æœåŠ¡ $service å·²åœæ­¢ï¼Œæ­£åœ¨é‡å¯..."
        systemctl restart $service
        sleep 5
        if systemctl is-active --quiet $service; then
            echo "æœåŠ¡ $service é‡å¯æˆåŠŸ"
        else
            echo "æœåŠ¡ $service é‡å¯å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨æ£€æŸ¥"
        fi
    fi
done</code></pre>
      </div>
      <div class="script-meta">
        <span>ğŸ“… 2024-03-18</span>
        <span>â­ é«˜å¯ç”¨</span>
        <span>ğŸ”„ è‡ªåŠ¨æ¢å¤</span>
      </div>
    </div>
  </div>
</div>

---

## ğŸŒ ç½‘ç»œå·¥å…·è„šæœ¬

<div class="script-category">
  <div class="script-item">
    <div class="script-header">
      <h3>ğŸ” ç«¯å£æ‰«æ</h3>
      <span class="script-tag">ç½‘ç»œ</span>
    </div>
    <div class="script-content">
      <p>æ‰«ææŒ‡å®šä¸»æœºçš„å¼€æ”¾ç«¯å£ï¼Œæ£€æŸ¥æœåŠ¡å¯ç”¨æ€§</p>
      <div class="script-code">
        <pre><code>#!/bin/bash
# ç«¯å£æ‰«æè„šæœ¬
HOST=$1
PORTS=(22 80 443 3306 6379)

if [ -z "$HOST" ]; then
    echo "ç”¨æ³•: $0 <ä¸»æœºåœ°å€>"
    exit 1
fi

echo "æ‰«æä¸»æœº: $HOST"
for port in "${PORTS[@]}"; do
    if timeout 3 bash -c "echo >/dev/tcp/$HOST/$port" 2>/dev/null; then
        echo "ç«¯å£ $port: å¼€æ”¾"
    else
        echo "ç«¯å£ $port: å…³é—­"
    fi
done</code></pre>
      </div>
      <div class="script-meta">
        <span>ğŸ“… 2024-03-12</span>
        <span>â­ ç½‘ç»œè¯Šæ–­</span>
        <span>ğŸ” å®‰å…¨æ£€æŸ¥</span>
      </div>
    </div>
  </div>
</div>

---

## ğŸ“ˆ Shellè„šæœ¬ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| è„šæœ¬æ€»æ•° | 15+ |
| åˆ†ç±»æ•°é‡ | 4ä¸ª |
| æ›´æ–°é¢‘ç‡ | å‘¨æ›´æ–° |
| ä½¿ç”¨åœºæ™¯ | è¿ç»´è‡ªåŠ¨åŒ– |

---

## ğŸ’¡ Shellç¼–ç¨‹æŠ€å·§

<div class="tips-section">
  <div class="tip-item">
    <h4>ğŸ”§ å˜é‡ä¸å‚æ•°</h4>
    <ul>
      <li>ä½¿ç”¨ <code>${var}</code> è¿›è¡Œå˜é‡å¼•ç”¨</li>
      <li>æ£€æŸ¥å‚æ•°æ•°é‡: <code>if [ $# -ne 2 ]</code></li>
      <li>è®¾ç½®é»˜è®¤å€¼: <code>${var:-default}</code></li>
    </ul>
  </div>
  
  <div class="tip-item">
    <h4>ğŸ›¡ï¸ é”™è¯¯å¤„ç†</h4>
    <ul>
      <li>ä½¿ç”¨ <code>set -e</code> é‡é”™å³åœ</li>
      <li>æ£€æŸ¥å‘½ä»¤æ‰§è¡Œç»“æœ: <code>if [ $? -eq 0 ]</code></li>
      <li>æ—¥å¿—è®°å½•: <code>echo "é”™è¯¯ä¿¡æ¯" >> error.log</code></li>
    </ul>
  </div>
  
  <div class="tip-item">
    <h4>âš¡ æ€§èƒ½ä¼˜åŒ–</h4>
    <ul>
      <li>é¿å…é¢‘ç¹è°ƒç”¨å¤–éƒ¨å‘½ä»¤</li>
      <li>ä½¿ç”¨å†…ç½®å‘½ä»¤æ›¿ä»£å¤–éƒ¨å·¥å…·</li>
      <li>åˆç†ä½¿ç”¨ç®¡é“å’Œé‡å®šå‘</li>
    </ul>
  </div>
</div>

---

> ğŸ› ï¸ å¥½çš„Shellè„šæœ¬ä¸ä»…èƒ½è§£å†³é—®é¢˜ï¼Œæ›´åº”è¯¥å…·å¤‡å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¥å£®æ€§
</div>

<style>
.shell-scripts-page {
  max-width: 1000px;
  margin: 0 auto;
  padding: 0 20px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
}

.shell-scripts-page h1 {
  text-align: center;
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 1rem;
  font-size: 2.5rem;
  font-weight: 700;
}

.shell-scripts-page blockquote {
  text-align: center;
  font-style: italic;
  color: #6b7280;
  border-left: 4px solid #10b981;
  padding: 1rem 2rem;
  margin: 2rem auto;
  background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
  border-radius: 8px;
  max-width: 600px;
}

/* è„šæœ¬åˆ†ç±» */
.script-category {
  display: grid;
  gap: 25px;
  margin: 2rem 0;
}

.script-item {
  background: linear-gradient(135deg, #fff 0%, #f0fdf4 100%);
  border-radius: 16px;
  padding: 30px;
  border: 1px solid rgba(16, 185, 129, 0.1);
  box-shadow: 0 8px 32px rgba(16, 185, 129, 0.1);
  transition: all 0.3s ease;
}

.script-item:hover {
  transform: translateY(-5px);
  box-shadow: 0 16px 48px rgba(16, 185, 129, 0.2);
}

.script-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.script-header h3 {
  color: #374151;
  margin: 0;
  font-weight: 600;
}

.script-tag {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  color: white;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
}

.script-content p {
  color: #6b7280;
  margin-bottom: 20px;
  line-height: 1.6;
}

.script-code {
  background: #1f2937;
  border-radius: 8px;
  margin: 15px 0;
  overflow-x: auto;
}

.script-code pre {
  margin: 0;
  padding: 20px;
  color: #e5e7eb;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 0.9rem;
  line-height: 1.5;
}

.script-code code {
  color: #e5e7eb;
}

.script-meta {
  display: flex;
  gap: 15px;
  color: #10b981;
  font-size: 0.9rem;
  font-weight: 500;
  flex-wrap: wrap;
}

/* æŠ€å·§éƒ¨åˆ† */
.tips-section {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 25px;
  margin: 2rem 0;
}

.tip-item {
  background: linear-gradient(135deg, #fff 0%, #f0fdf4 100%);
  border-radius: 12px;
  padding: 25px;
  border: 1px solid rgba(16, 185, 129, 0.1);
}

.tip-item h4 {
  color: #374151;
  margin-bottom: 1rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.tip-item ul {
  list-style: none;
  padding: 0;
}

.tip-item li {
  color: #6b7280;
  padding: 8px 0;
  border-bottom: 1px solid #e5e7eb;
  position: relative;
  padding-left: 20px;
}

.tip-item li:before {
  content: 'â–¸';
  color: #10b981;
  font-weight: bold;
  position: absolute;
  left: 0;
}

.tip-item li:last-child {
  border-bottom: none;
}

.tip-item code {
  background: #f3f4f6;
  padding: 2px 6px;
  border-radius: 4px;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 0.85rem;
  color: #10b981;
}

/* è¡¨æ ¼æ ·å¼ */
.shell-scripts-page table {
  width: 100%;
  border-collapse: collapse;
  margin: 2rem 0;
  background: linear-gradient(135deg, #fff 0%, #f0fdf4 100%);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 16px rgba(16, 185, 129, 0.1);
}

.shell-scripts-page th,
.shell-scripts-page td {
  padding: 15px;
  text-align: left;
  border-bottom: 1px solid #e5e7eb;
}

.shell-scripts-page th {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  color: white;
  font-weight: 600;
}

.shell-scripts-page tr:last-child td {
  border-bottom: none;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .shell-scripts-page {
    padding: 0 15px;
  }
  
  .shell-scripts-page h1 {
    font-size: 2rem;
  }
  
  .script-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }
  
  .script-meta {
    flex-direction: column;
    gap: 8px;
  }
  
  .tips-section {
    grid-template-columns: 1fr;
  }
  
  .script-item,
  .tip-item {
    padding: 20px;
  }
  
  .script-code pre {
    padding: 15px;
    font-size: 0.8rem;
  }
}
</style>

